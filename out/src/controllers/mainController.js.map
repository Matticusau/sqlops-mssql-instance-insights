{"version":3,"sources":["../src/controllers/mainController.ts"],"names":[],"mappings":"AAAA,EAAE;AACF,uBAAuB;AACvB,sBAAsB;AACtB,2BAA2B;AAC3B,EAAE;AACF,gCAAgC;AAChC,6FAA6F;AAC7F,uJAAuJ;AACvJ,wFAAwF;AAExF;;;gGAGgG;AAEhG,YAAY,CAAC;;;;;;;;;;AAEb,iCAAiC;AACjC,iCAAiC;AACjC,kCAAkC;AAClC,qDAA8C;AAC9C,mEAAgE;AAChE,2BAA2B;AAE3B;;GAEG;AACH,oBAAoC,SAAQ,wBAAc;IAEtD;;OAEG;IACI,UAAU;QACb,KAAK,CAAC,QAAQ,CAAC,6BAA6B,CAAC,CAAC;IAClD,CAAC;IAED;;OAEG;IACI,QAAQ;QAEX,EAAE;QACF,qBAAqB;QACrB,EAAE;QACF,MAAM,CAAC,KAAK,CAAC,YAAY,CAAC,gDAAgD,EAAE,CAAC,CAAM,EAAE,EAAE,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAE,CAAC;QAElI,EAAE;QACF,wBAAwB;QACxB,EAAE;QACF,MAAM,CAAC,QAAQ,CAAC,eAAe,CAAC,mDAAmD,EAAE,CAAC,QAAgB,EAAE,EAAE;YACtG,IAAI,CAAC,sBAAsB,CAAC,QAAQ,CAAC,CAAC;QAC1C,CAAC,CAAC,CAAC;QACH,MAAM,CAAC,QAAQ,CAAC,eAAe,CAAC,+CAA+C,EAAE,GAAG,EAAE;YAClF,MAAM;YAEN,oCAAoC;YACpC,MAAM,CAAC,MAAM,CAAC,sBAAsB,CAAC,+BAA+B,CAAC,CAAC;QAC1E,CAAC,CAAC,CAAC;QAEH,OAAO,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;IACjC,CAAC;IAEO,OAAO,CAAC,IAAY;QACxB,sBAAsB;QACtB,GAAG,CAAC,IAAI,CAAC,CAAC;IACd,CAAC;IAGa,sBAAsB,CAAC,QAAgB;;YACjD,OAAO,CAAC,GAAG,CAAC,yCAAyC,CAAC,CAAC;YACvD,IAAI,YAAY,GAAG,IAAI,uCAAkB,CAAC,QAAQ,CAAC,CAAC;YACpD,IAAI,aAAa,GAAG,MAAM,YAAY,CAAC,gBAAgB,EAAE,CAAC;YAC1D,OAAO,CAAC,GAAG,CAAC,gBAAgB,GAAG,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC,CAAC;YAC9D,uDAAuD;YACvD,wDAAwD;YACxD,6BAA6B;YAC7B,yBAAyB;YACzB,8EAA8E;YAC9E,IAAI,CAAC,OAAO,CAAC,mDAAmD,CAAC,CAAC;YAClE,OAAO,CAAC,GAAG,CAAC,qCAAqC,CAAC,CAAC;QACvD,CAAC;KAAA;CACJ;AAtDD,iCAsDC","file":"mainController.js","sourcesContent":["//\n// Author:  Matt Lavery\n// Date:    02/07/2018\n// Purpose: Main Controller\n//\n// When         Who         What\n// ------------------------------------------------------------------------------------------\n// 02/07/2018   MLavery     Strictly set 'any' types to fix src\\extension.ts(50,55): error TS7006: Parameter 'connection' implicitly has an 'any' type.\n// 22/07/2018   MLavery     Updated openurl to opn (https://github.com/sindresorhus/opn)\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the Source EULA. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n'use strict';\n\nimport * as vscode from 'vscode';\nimport * as sqlops from 'sqlops';\nimport * as Utils from '../utils';\nimport ControllerBase from './controllerBase';\nimport { CreateInstanceData } from '../data/createInstanceData'; \nimport * as opn from 'opn';\n\n/**\n * The main controller class that initializes the extension\n */\nexport default class MainController extends ControllerBase {\n\n    /**\n     * Deactivates the extension\n     */\n    public deactivate(): void {\n        Utils.logDebug('Main controller deactivated');\n    }\n\n    /**\n     * Activates the extension\n     */\n    public activate(): Promise<boolean> {\n        \n        //\n        // register the tasks\n        //\n        sqlops.tasks.registerTask('mssql-instance-insights.openVersionHealthCheck', (e: any) => this.openVersionHealthCheck(e.ownerUri) );\n\n        //\n        // register the commands\n        //\n        vscode.commands.registerCommand('mssql-instance-insights.openVersionHealthCheckCmd', (ownerUri: string) => {\n            this.openVersionHealthCheck(ownerUri);\n        });\n        vscode.commands.registerCommand('mssql-instance-insights.runVersionHealthCheck', () => {\n            // TBA\n    \n            // Display a message box to the user\n            vscode.window.showInformationMessage('This feature is comming soon!');\n        });\n\n        return Promise.resolve(true);\n    }\n\n    private openurl(link: string): void {\n        // openurl.open(link);\n        opn(link);\n    }\n\n\n    private async openVersionHealthCheck(ownerUri: string) {\n        console.log('this.openVersionHealthCheck => starting');\n        let instanceData = new CreateInstanceData(ownerUri);\n        let serverVersion = await instanceData.getServerVersion();\n        console.log('serverVersion=' + JSON.stringify(serverVersion));\n        // let qryPdr = await InstanceUtils.getQueryProvider();\n        // // console.log('connSvc=' + JSON.stringify(connSvc));\n        // qryPdr.runQueryAndReturn()\n        // get the version number\n        // this.openurl('https://sqlversions.azurewebsites.net/healthcheck?version=');\n        this.openurl('https://sqlversions.azurewebsites.net/healthcheck');\n        console.log('this.openVersionHealthCheck => done');\n    }\n}\n\n"],"sourceRoot":"C:\\GitHub\\sqlops-mssql-instance-insights/src"}